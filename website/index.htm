
<!doctype html>
<html>
<head>
<title>Quake Lenses - Home</title>
<link rel="stylesheet" href="main.css" />
</head>
<body>

<div id="header">
</div>

<div id="nav">
<a href="index.htm">home</a> | <a href="theory.htm">theory</a> | <a href="manual.htm">manual</a> | <a href="gallery.htm">gallery</a> | <a href="faq.htm">f.a.q.</a> | <a href="download.htm">download</a> | <a href="contact.htm">contact</a>
</div>

<div id="container">

<h3>Welcome</h3>
<p>
Quake Lenses is like Surround Sound for your eyes.  It extends your field of view, allowing you to see more of your surroundings in a small amount of screen space.
</p>
<p>
This is a fork of <a href="http://strlen.com/gfxengine/fisheyequake/">Fisheye Quake</a> using the <a href="http://disenchant.net/engine.html">TyrQuake</a> source port.  It adds support for custom lenses using Lua scripts.  Several lenses are included.
</p>
<p>
Check out the following pages:
<ul>
   <li><a href="theory.htm">theory</a> - how it works</li>
   <li><a href="manual.htm">manual</a> - how to create your own lens</li>
   <li><a href="gallery.htm">gallery</a> - a look at different types of lenses</li>
</ul>
</p>

<h3>Quick Look</h3>
<table>
<tr>
   <td>
      <pre>
&gt; lens fisheye2
&gt; fit </pre>
      <a href="pics/index/fish2.gif"><img src="pics/index/fish2.gif" width=300 /></a>
   </td>
   <td>
      <pre>
&gt; lens panini
&gt; hfov 200
</pre>
      <a href="pics/index/panini.gif"><img src="pics/index/panini.gif" width=300 /></a>
   </td>
</tr>
<tr>
   <td>
      <pre>
&gt; lens vandergrinten
&gt; fit
</pre>
      <a href="pics/index/vandg.gif"><img src="pics/index/vandg.gif" width=300 /></a>
   </td>
   <td>
      <pre>
&gt; lens mercator
&gt; fit
</pre>
      <a href="pics/index/merc.gif"><img src="pics/index/merc.gif" width=300 /></a>
   </td>
</tr>
<tr>
   <td>
      <pre>
&gt; lens winkeltripel
&gt; fit
</pre>
      <a href="pics/index/winktri.gif"><img src="pics/index/winktri.gif" width=300 /></a>
   </td>
   <td>
      <pre>
&gt; lens cube
&gt; fit</pre>
      <a href="pics/index/cube.gif"><img src="pics/index/cube.gif" width=300 /></a>
   </td>
</tr>
</table>

<h3>Commands</h3>
Commands can be entered via Quake's console by pressing the tilde key (~).
<ul>
   <li><samp>lens &lt;name&gt;</samp> : change the lens (use tab key for completion)</li>
   <li><samp>hfov #</samp> : specify <acronym title="Field of View">FOV</acronym> in horizontal degrees</li>
   <li><samp>vfov #</samp>: specify <acronym title="Field of View">FOV</acronym> in vertical degrees</li>
   <li><samp>fit</samp> : make the lens image fit the screen</li>
   <li><samp>hfit</samp> : fit horizontally only</li>
   <li><samp>vfit</samp> : fit vertically only</li>
   <li><samp>rubix</samp> : visualize lens shape by painting cubemap like a rubix cube</li>
</ul>

<h3>Lens Files</h3>
<p>
In the lenses folder, you will see a collection of Lua files.  These represent the lenses you can use in a game.  If you're interested, you can <a href="manual.htm">create your own</a> and place it in this folder.  Here is an example script: 
<table><tr><td>
         <div style="padding:3px;background:#2a2a2a; color:#efefef; margin-left:auto; margin-right:auto"><font face="monospace">
<span style="background-color: #202020"><font color="#535353">&nbsp;1 </font></span>hsym = <font color="#ef5939">true</font><br>
<span style="background-color: #202020"><font color="#535353">&nbsp;2 </font></span>vsym = <font color="#ef5939">true</font><br>
<span style="background-color: #202020"><font color="#535353">&nbsp;3 </font></span>max_hfov = <font color="#fcaf3e">360</font><br>
<span style="background-color: #202020"><font color="#535353">&nbsp;4 </font></span>max_vfov = <font color="#fcaf3e">180</font><br>
<span style="background-color: #202020"><font color="#535353">&nbsp;5 </font></span>hfit_size = <font color="#fcaf3e">2</font>*pi<br>
<span style="background-color: #202020"><font color="#535353">&nbsp;6 </font></span><br>
<span style="background-color: #202020"><font color="#535353">&nbsp;7 </font></span><font color="#ad7fa8">function</font>&nbsp;xy_to_latlon(x,y)<br>
<span style="background-color: #202020"><font color="#535353">&nbsp;8 </font></span>&nbsp;&nbsp; <font color="#ffffff"><b>local</b></font>&nbsp;lon = x<br>
<span style="background-color: #202020"><font color="#535353">&nbsp;9 </font></span>&nbsp;&nbsp; <font color="#ffffff"><b>local</b></font>&nbsp;lat = atan(sinh(y))<br>
<span style="background-color: #202020"><font color="#535353">10 </font></span>&nbsp;&nbsp; <font color="#ffffff"><b>return</b></font>&nbsp;lat, lon<br>
<span style="background-color: #202020"><font color="#535353">11 </font></span><font color="#ad7fa8">end</font><br>
<span style="background-color: #202020"><font color="#535353">12 </font></span><br>
<span style="background-color: #202020"><font color="#535353">13 </font></span><font color="#ad7fa8">function</font>&nbsp;latlon_to_xy(lat,lon)<br>
<span style="background-color: #202020"><font color="#535353">14 </font></span>&nbsp;&nbsp; <font color="#ffffff"><b>local</b></font>&nbsp;x = lon<br>
<span style="background-color: #202020"><font color="#535353">15 </font></span>&nbsp;&nbsp; <font color="#ffffff"><b>local</b></font>&nbsp;y = log(tan(pi*<font color="#fcaf3e">0.25</font>+lat*<font color="#fcaf3e">0.5</font>))<br>
<span style="background-color: #202020"><font color="#535353">16 </font></span>&nbsp;&nbsp; <font color="#ffffff"><b>return</b></font>&nbsp;x,y<br>
<span style="background-color: #202020"><font color="#535353">17 </font></span><font color="#ad7fa8">end</font><br>
<span style="background-color: #202020"><font color="#535353">18 </font></span><br>
<span style="background-color: #202020"><font color="#535353">19 </font></span><font color="#ad7fa8">function</font>&nbsp;xy_isvalid(x,y)<br>
<span style="background-color: #202020"><font color="#535353">20 </font></span>&nbsp;&nbsp; <font color="#ffffff"><b>return</b></font>&nbsp;abs(x) &lt;= pi<br>
<span style="background-color: #202020"><font color="#535353">21 </font></span><font color="#ad7fa8">end</font><br>
         </font></div>
</td></tr></table>

</p>

<h3>Selecting a Lens</h3>
<p>
To change your lens, use the <samp>lens</samp> command.  For example, if you wish to use the "panini" lens, type <samp>lens panini</samp>. The game will then load the file called "panini.lua" from the lenses folder.
</p>
<h4>Lens Tab Completion</h4>
<p>
As a convenience for quickly selecting lenses, you can use the tab-completion feature from <a href="http://disenchant.net/engine.html">TyrQuake</a>.  Begin typing the lens name and press tab to try to complete the rest of the name.  If more than one lenses match, you can press TAB again to list all the matching lenses.  (You can also use this to list all the available lenses, seen below.) 
</p>
<table>
   <tr>
      <td>
         <pre>
&gt; lens &lt;TAB&gt;&lt;TAB&gt;</pre>
         <img src="pics/lenses.gif" />
      </td>
   </tr>
</table>

<h3>FOV</h3>
<p>
You can zoom in and out by specifying a viewing angle for your Field of View (FOV). Type <samp>hfov 180</samp> if you want your screen to horizontally cover 180 degrees.  Similarly, you can type <samp>vfov 90</samp> to cover 90 degrees vertically.
</p>
<table>
   <tr>
      <td>
         <pre>
&gt; lens panini
&gt; hfov 90</pre>
      <a href="pics/fov90.gif"><img src="pics/fov90.gif" width=300></a>
      </td>
      <td>
         <pre>
&gt; lens panini
&gt; hfov 180</pre>
      <a href="pics/fov180.gif"><img src="pics/fov180.gif" width=300></a>
      </td>
   </tr>
</table>

<h3>Fitting</h3>
<p>
If the image produced by the lens is not infinite in size, you can fit the whole image on the screen by typing <samp>fit</samp>.  Alternately, if you just want the picture to fit the horizontal or vertical bounds of the screen, you can type <samp>hfit</samp> or <samp>vfit</samp>, respectively.
</p>
<p>
<table>
<tr>
   <td>
      <pre>
&gt; lens hammer
&gt; hfit
</pre>
      <a href="pics/hfit.gif"><img src="pics/hfit.gif" width=300 /></a>
   </td>
   <td>
      <pre>
&gt; lens hammer
&gt; vfit
</pre>
      <a href="pics/vfit.gif"><img src="pics/vfit.gif" width=300 /></a>
   </td>
</tr>
</table>
</p>

<h3>Invalid Modes</h3>
<p>
If the lens does not support the current zoom mode, Quake Lenses will give you a blank screen, an error message on the console, and will wait for you to enter a valid zoom mode.  For example, the cube lens does not support FOV; it can only be zoomed to fit the screen.  Another common error happens if the specified FOV is too high for the current lens.
</p>

<h3>Visualizing the Distortion</h3>
You can use the <samp>rubix</samp> command to paint the cubemap like a rubix cube as a visual aid for understanding the lens distortion.
<p>
<table>
<tr>
<td>
<a href="pics/rubix1.jpg"><img src="pics/rubix1.jpg" width=300 /></a>
</td>
<td>
<a href="pics/rubix0.jpg"><img src="pics/rubix0.jpg" width=300 /></a>
</td>
</tr>
</table>
</p>


</div>
</body>
</html>
